<html>

<head>
    <title>Poke Blurs</title>
    <script src='../../lib/jquery.min.js'></script>
    <script src="../engine.js"></script>
    <script src='../../patreon.js'></script>
    <script src='../../backbutton.js'></script>
</head>

<body>

    <div id="content"></div>

    <!-- <div id="extraButtons" class="bottom2">
        <button class="box">TEST</button>
    </div> -->

    <script>

        var allPokemon
        var blurGame

        fetch('https://pokeapi.co/api/v2/pokemon/?limit=151').then(x => x.json().then(
            ret => {
                allPokemon = ret.results.map(x => x.name)
                console.log(allPokemon)

                blurGame = new BlurGame({
                    title: 'LoL Blurs',
                    description: `Guess the League of Legends Champion Splash Arts!<br />
                          Write the name of the correct champion on the textbox.<br />
                          You have three tries, each one yielding less points than the previous one.<br />
                          Press ENTER to start.<br />`,

                    getImagePath: async (name) => {
                        let p = await fetch('https://pokeapi.co/api/v2/pokemon/' + name)
                        let p2 = await p.json()
                        return p2.sprites.front_default
                    },

                    getRandomName: () => {
                        return allPokemon[parseInt(Math.random() * allPokemon.length)]
                    },

                    hasEnded: (used) => {
                        return used.length == allPokemon.length
                    },

                    nextRoundText: 'NEXT CHAMPION',

                    allNames: allPokemon,

                    blurMultiplier: .9,

                })
            }))

        function debug() {
            allPokemon = ['pikachu', 'raichu']
        }
    </script>

</body>

</html>